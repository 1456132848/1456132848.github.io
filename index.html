<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="个人博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="个人博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="个人博客">





  
  
  <link rel="canonical" href="http://yoursite.com/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>个人博客</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/05/跨域问题详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="林明星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/05/跨域问题详解/" class="post-title-link" itemprop="url">跨域问题详解</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-05 14:15:35 / 修改时间：14:51:50" itemprop="dateCreated datePublished" datetime="2019-07-05T14:15:35+08:00">2019-07-05</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、跨域问题简述"><a href="#一、跨域问题简述" class="headerlink" title="一、跨域问题简述"></a>一、跨域问题简述</h1><p>引起跨域的根本原因：浏览器的同源策略。</p>
<pre><code>因为存在浏览器同源策略，所以才会有跨域问题。所谓同源是指：域名、协议、端口相同。
</code></pre><p><img src="/2019/07/05/跨域问题详解/跨域图片.png" alt></p>
<p>另外，同源策略又分为以下两种：</p>
<pre><code>1、DOM 同源策略：禁止对不同源页面 DOM 进行操作。这里主要场景是 iframe 跨域的情况，不同域名的 iframe 是限制互相访问的。

2、XMLHttpRequest 同源策略：禁止使用 XHR 对象向不同源的服务器地址发起 HTTP 请求。
</code></pre><h1 id="二、为什么要有跨域限制"><a href="#二、为什么要有跨域限制" class="headerlink" title="二、为什么要有跨域限制"></a>二、为什么要有跨域限制</h1><p>如果没有 DOM 同源策略，也就是说不同域的 iframe 之间可以相互访问，那么黑客可以这样进行攻击：</p>
<pre><code>1、做一个假网站，里面用 iframe 嵌套一个银行网站 http://mybank.com。
2、把 iframe 宽高啥的调整到页面全部，这样用户进来除了域名，别的部分和银行的网站没有任何差别。
3、这时如果用户输入账号密码，我们的主网站可以跨域访问到 http://mybank.com 的 dom 节点，就可以拿到用户的账户密码了    
</code></pre><p>如果没有XMLHttpRequest 同源策略，那么黑客可以进行 CSRF（跨站请求伪造） 攻击：</p>
<pre><code>1、用户登录了自己的银行页面 http://mybank.com，http://mybank.com 向用户的 cookie 中添加用户标识。
2、用户浏览了恶意页面 http://evil.com，执行了页面中的恶意 AJAX 请求代码。
3、http://evil.com 向 http://mybank.com 发起 AJAX HTTP 请求，请求会默认把 http://mybank.com 对应 cookie 也同时发送过去。
4、银行页面从发送的 cookie 中提取用户标识，验证用户无误，response 中返回请求数据。此时数据就泄露了。
5、而且由于 Ajax 在后台执行，用户无法感知这一过程。
</code></pre><h1 id="三、跨域的解决方法"><a href="#三、跨域的解决方法" class="headerlink" title="三、跨域的解决方法"></a>三、跨域的解决方法</h1><h2 id="3-1-后端解决"><a href="#3-1-后端解决" class="headerlink" title="3.1 后端解决"></a>3.1 后端解决</h2><h3 id="3-1-1-对于springMvc框架："><a href="#3-1-1-对于springMvc框架：" class="headerlink" title="3.1.1 对于springMvc框架："></a>3.1.1 对于springMvc框架：</h3><pre><code>新建一个filter，在response中添加允许跨域的响应头。

public class SimpleCORSFilter implements Filter{  

    @Override  
    public void destroy() {  

    }  

    @Override  
    public void doFilter(ServletRequest req, ServletResponse res,  
            FilterChain chain) throws IOException, ServletException {  
            HttpServletResponse response = (HttpServletResponse) res;  
            //设置允许跨域的请求源
            response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);  
            //设置允许跨域的请求方法
            response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, GET, OPTIONS, DELETE&quot;);  
            //设置缓存的最大时间
            response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);  
            //设置响应头
            response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;x-requested-with&quot;);  
            chain.doFilter(req, res);  

    }  

    @Override  
    public void init(FilterConfig arg0) throws ServletException {  

    }  

}

另外在web.xml中注册该filter
&lt;filter&gt;  
  &lt;filter-name&gt;cors&lt;/filter-name&gt;  
  &lt;filter-class&gt;com.ssm.web.filter.SimpleCORSFilter&lt;/filter-class&gt;  
&lt;/filter&gt;  
&lt;filter-mapping&gt;  
  &lt;filter-name&gt;cors&lt;/filter-name&gt;  
  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;  
&lt;/filter-mapping&gt;
</code></pre><h3 id="3-1-2-对于springBoot框架："><a href="#3-1-2-对于springBoot框架：" class="headerlink" title="3.1.2 对于springBoot框架："></a>3.1.2 对于springBoot框架：</h3><p>添加以下配置即可：</p>
<pre><code>package com.yunkai.psbmngboot.config;
import com.yunkai.psbmngboot.interceptor.WebInterceptor;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.*;

/**
 * CorsConfig
 *
 * @author gsong
 * @date 2019/05/14 00:53
 * 跨域
 */
@Configuration
public class WebConfigurer extends WebMvcConfigurationSupport {

    @Autowired
    private WebInterceptor webInterceptor;

    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping(&quot;/**&quot;)
                .allowedOrigins(&quot;*&quot;)
                .allowCredentials(true)
                .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;)
                .maxAge(36000);
        System.out.println(&quot;xxx&quot;);
    }
 }
</code></pre><h2 id="3-2-前端解决"><a href="#3-2-前端解决" class="headerlink" title="3.2 前端解决"></a>3.2 前端解决</h2><h2 id="3-2-1-vue框架解决方法"><a href="#3-2-1-vue框架解决方法" class="headerlink" title="3.2.1 vue框架解决方法"></a>3.2.1 vue框架解决方法</h2><p>在config/index.js中的dev配置中添加proxyTable,’/api’是一个拦截表示，在开发环境中请求时需要在url中统一加上’/api’, pathRewrite 会在请求时去除/api，target是需要跨域的请求地址：</p>
<pre><code>dev: {
    env: require(&apos;./dev.env&apos;),
    host: &apos;localhost&apos;,
    port: 9520,
    autoOpenBrowser: false,
    autoOpenPage: &apos;/login&apos;,
    assetsSubDirectory: &apos;static&apos;,
    assetsPublicPath: &apos;/&apos;,
    proxyTable: {
      &apos;/api&apos;: {
        target: &apos;http://localhost:9999&apos;,
        changeOrigin: true,
        pathRewrite: {
          &apos;^/api&apos;: &apos;/&apos;
        }
      }
    },
    cssSourceMap: false
}
</code></pre><h2 id="3-2-2-nginx解决跨域问题"><a href="#3-2-2-nginx解决跨域问题" class="headerlink" title="3.2.2 nginx解决跨域问题"></a>3.2.2 nginx解决跨域问题</h2><p>在开发环境中请求时需要在url中统一加上’/api’, proxy_pass是需要跨域的请求地址。在server中配置：</p>
<pre><code>location / {
    proxy_pass http://localhost:81;
    proxy_redirect default;
}

 #添加访问目录为/apis的代理配置
location /apis {
    rewrite  ^/apis/(.*)$ /$1 break;
    proxy_pass   http://localhost:82;
}
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/27/Elasticsearch的安装与使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="林明星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/27/Elasticsearch的安装与使用/" class="post-title-link" itemprop="url">Elasticsearch的安装与使用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-27 09:35:58 / 修改时间：17:14:55" itemprop="dateCreated datePublished" datetime="2019-05-27T09:35:58+08:00">2019-05-27</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h1><pre><code>1、分布式的实时文件存储，每个字段都被索引并可被搜索
2、分布式的实时分析搜索引擎
3、可以扩展到上百台服务器，处理PB级结构化或非结构化数据
</code></pre><p>Elasticsearch是面向文档(document oriented)的，这意味着它可以存储整个对象或文档(document)。然而它不仅仅是存储，还会索引(index)每个文档的内容使之可以被搜索。在Elasticsearch中，你可以对文档（而非成行成列的数据）进行索引、搜索、排序、过滤。这种理解数据的方式与以往完全不同，这也是Elasticsearch能够执行复杂的全文搜索的原因之一。</p>
<p>ELasticsearch使用Javascript对象符号(JavaScript Object Notation)，也就是JSON，作为文档序列化格式。</p>
<p>在Elasticsearch中将对象转化为JSON并做索引要比在表结构中做相同的事情简单的多。    </p>
<h1 id="二、安装"><a href="#二、安装" class="headerlink" title="二、安装"></a>二、安装</h1><h2 id="2、1安装"><a href="#2、1安装" class="headerlink" title="2、1安装"></a>2、1安装</h2><p>安装前提需要安装java环境。<br>elastic search下载地址：<a href="https://www.elastic.co/cn/products/elasticsearch（点击右侧download）" target="_blank" rel="noopener">https://www.elastic.co/cn/products/elasticsearch（点击右侧download）</a><br>（推荐安装谷歌浏览器的一个插件elasticsearch-head，它是Es的一个客户端工具）。</p>
<h2 id="2、2运行"><a href="#2、2运行" class="headerlink" title="2、2运行"></a>2、2运行</h2><p>安装完成后执行命令</p>
<pre><code>./bin/elasticsearch，
</code></pre><p>如果想在后台以守护进程模式运行，添加-d参数</p>
<p>打开另一个终端测试，输入命令：</p>
<pre><code>curl &apos;http://localhost:9200/?pretty&apos;
</code></pre><p>看到以下信息，说明es启动成功，正常运行：</p>
<pre><code>{
   &quot;status&quot;: 200,
   &quot;name&quot;: &quot;Shrunken Bones&quot;,
   &quot;version&quot;: {
      &quot;number&quot;: &quot;1.4.0&quot;,
      &quot;lucene_version&quot;: &quot;4.10&quot;
   },
   &quot;tagline&quot;: &quot;You Know, for Search&quot;
}
</code></pre><h2 id="2、3关闭"><a href="#2、3关闭" class="headerlink" title="2、3关闭"></a>2、3关闭</h2><p>可以使用Ctrl-C快捷键终止，或者你可以调用shutdown API来关闭：</p>
<pre><code>curl -XPOST &apos;http://localhost:9200/_shutdown&apos;    
</code></pre><h1 id="三、交互方式"><a href="#三、交互方式" class="headerlink" title="三、交互方式"></a>三、交互方式</h1><p>其他所有程序语言都可以使用RESTful API，通过9200端口的与Elasticsearch进行通信，你可以使用你喜欢的WEB客户端，事实上，如你所见，你甚至可以通过curl命令与Elasticsearch通信<br>向Elasticsearch发出的请求的组成部分与其它普通的HTTP请求是一样的：</p>
<pre><code>curl -X&lt;VERB&gt; &apos;&lt;PROTOCOL&gt;://&lt;HOST&gt;:&lt;PORT&gt;/&lt;PATH&gt;?&lt;QUERY_STRING&gt;&apos; -d &apos;&lt;BODY&gt;&apos;
</code></pre><p>举例说明，为了计算集群中的文档数量，我们可以这样做：</p>
<pre><code>curl -H &quot;Content-Type: application/json&quot; -XGET &apos;http://localhost:9200/_count?pretty&apos; -d &apos;
{
    &quot;query&quot;: {
        &quot;match_all&quot;: {}
    }
}
&apos;
</code></pre><p>上面的请求会得到如下的JSON格式的响应主体：    </p>
<pre><code>{
  &quot;count&quot; : 8874,
  &quot;_shards&quot; : {
    &quot;total&quot; : 1,
    &quot;successful&quot; : 1,
    &quot;skipped&quot; : 0,
    &quot;failed&quot; : 0
  }
}
</code></pre><p>es官网中没有指定请求头，-H “Content-Type: application/json” ,这在高版本的es中会报错。</p>
<h1 id="四、索引"><a href="#四、索引" class="headerlink" title="四、索引"></a>四、索引</h1><p>在Elasticsearch中，文档归属于一种类型(type),而这些类型存在于索引(index)中，我们可以画一些简单的对比图来类比传统关系型数据库：</p>
<pre><code>Relational DB -&gt; Databases -&gt; Tables -&gt; Rows -&gt; Columns
Elasticsearch -&gt; Indices   -&gt; Types  -&gt; Documents -&gt; Fields
</code></pre><p>Elasticsearch集群可以包含多个索引(indices)（数据库），每一个索引可以包含多个类型(types)（表），每一个类型包含多个文档(documents)（行），然后每个文档包含多个字段(Fields)（列）。</p>
<h2 id="4-1-操作索引"><a href="#4-1-操作索引" class="headerlink" title="4.1 操作索引"></a>4.1 操作索引</h2><p>新增索引（info-test为索引名称）</p>
<pre><code>curl -XPUT &quot;localhost:9200/info-test
</code></pre><p>删除索引</p>
<pre><code>curl -XDELETE &apos;http://localhost:9200/info-test&apos;
</code></pre><h2 id="4-2-操作文档"><a href="#4-2-操作文档" class="headerlink" title="4.2 操作文档"></a>4.2 操作文档</h2><p>插入文档（即插入一行数据，people是索引类型，相当于一个表，1是文档id，在没有申明id的情况下，向索引中插入文档，ES会随机生成一个ID）</p>
<pre><code>curl -H &quot;Content-Type: application/json&quot; -XPUT &quot;localhost:9200/info-test/people/1&quot; -d &apos;{&quot;title&quot;:&quot;123&quot;}&apos;
</code></pre><p>删除文档</p>
<pre><code>curl -H &quot;Content-Type: application/json&quot; -XDELETE &quot;localhost:9200/info-test/people/1&quot;
</code></pre><h2 id="4-3-查询"><a href="#4-3-查询" class="headerlink" title="4.3 查询"></a>4.3 查询</h2><p>Es有各种方式查询数据，可以在elasticsearch-head等客户端工具实践操作，这里不再赘述。</p>
<blockquote>
<p>参考：<a href="https://es.xiaoleilu.com/010_Intro/00_README.html" target="_blank" rel="noopener">Es权威指南</a></p>
<p>参考：<a href="https://blog.csdn.net/wyl9527/article/details/76039686/" target="_blank" rel="noopener">https://blog.csdn.net/wyl9527/article/details/76039686/</a></p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/16/maven知识点小记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="林明星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/16/maven知识点小记/" class="post-title-link" itemprop="url">maven知识点小记</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-16 16:44:46 / 修改时间：17:02:10" itemprop="dateCreated datePublished" datetime="2019-05-16T16:44:46+08:00">2019-05-16</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/maven/" itemprop="url" rel="index"><span itemprop="name">maven</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、maven更换阿里云镜像。"><a href="#一、maven更换阿里云镜像。" class="headerlink" title="一、maven更换阿里云镜像。"></a>一、maven更换阿里云镜像。</h1><p>在maven的setting.xml中的mirrors节点下添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;mirror&gt;</span><br><span class="line">	&lt;id&gt;alimaven&lt;/id&gt;</span><br><span class="line">	&lt;name&gt;aliyun maven&lt;/name&gt;</span><br><span class="line">	&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;</span><br><span class="line">	&lt;mirrorOf&gt;*&lt;/mirrorOf&gt; </span><br><span class="line">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure>
<h1 id="二、使用mvn-site构建项目文档"><a href="#二、使用mvn-site构建项目文档" class="headerlink" title="二、使用mvn site构建项目文档"></a>二、使用mvn site构建项目文档</h1><p>在pom文件中加入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">    &lt;pluginManagement&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;3.3&lt;/version&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;2.7&lt;/version&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">        &lt;/plugins&gt;</span><br><span class="line">    &lt;/pluginManagement&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure>
<p>在项目根目录下执行mvn-site即可。生成的文档将位于target/site目录下。</p>
<p>在idea中，使用idea自带的maven工具来执行site命令时会报错。原因暂时不明白。在命令行中执行mvn site时也会报一些错误，但是最终结果是build succes。</p>
<h1 id="三、maven依赖下载顺序"><a href="#三、maven依赖下载顺序" class="headerlink" title="三、maven依赖下载顺序"></a>三、maven依赖下载顺序</h1><pre><code>有三个仓库：
    本地仓库
    中央仓库
    远程仓库（可以在pom.xml或者setting.xml中配置）

maven首先在本地仓库中查找，若能找到依赖，则停止查找。
若在本地仓库没找到，则在中央仓库寻找，若找到，则下载至本地，然后停止查找。
若在中央仓库也没找到，并且配置了远程仓库，则在远程仓库寻找，若找到，则停止查找。
若在远程仓库仍然没有找到，则报错。
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/13/圆通开放平台订单对接/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="林明星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/13/圆通开放平台订单对接/" class="post-title-link" itemprop="url">圆通海外G面单订单对接</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-13 15:27:16 / 修改时间：16:12:37" itemprop="dateCreated datePublished" datetime="2019-05-13T15:27:16+08:00">2019-05-13</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/第三方平台对接/" itemprop="url" rel="index"><span itemprop="name">第三方平台对接</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、接口描述"><a href="#一、接口描述" class="headerlink" title="一、接口描述"></a>一、接口描述</h1><pre><code>客户端发起请求后，本接口接收订单信息HTTP请求，解析订单信息XML，并存入圆通系统，下单成功后业务员会在一定时间内带上传统面单上门揽件。请求地址
http://58.32.246.71:8000/overseaOrderServlet
</code></pre><h1 id="二、传输方式"><a href="#二、传输方式" class="headerlink" title="二、传输方式"></a>二、传输方式</h1><pre><code>本文档内描述的接口均采用Http传输协议。 Get请求用于测试是否可以连通圆通接口服务器，在浏览器访问以下相关接口地址，如果返回success则证明接口访问正常。 数据传输必须用post请求。请求参数以及数据处理参见1.1.2和1.1.3.
</code></pre><h1 id="三、报文结构"><a href="#三、报文结构" class="headerlink" title="三、报文结构"></a>三、报文结构</h1><pre><code>参数名称                   说明
logistics_interface     要发送的xml内容（必填）
data_digest             数字签名（必填）
clientId                客户编码（电商标识）（必填）
type                    订单类型（online:在线下单，offline:线下下单）（必填）

logistics_interface表示需要发送的xml内容，比如拉取面单、上传订单等xml报文。 partnerId 表示商家密钥，比如测试环境测试账号K21000119的密钥为123456。 data_digest代表数字签名，签名的原理是对要发送的xml报文字符串加上商家密钥，先进行MD5加密，然后转换成base64字符串，作为数字签名的数据。即： Base64 [ MD5 [ logistics_interface +partnerId ] ] 最后对所有参数的数据内容进行url编码。
</code></pre><h1 id="四、签名规则"><a href="#四、签名规则" class="headerlink" title="四、签名规则"></a>四、签名规则</h1><pre><code>加密步骤是：
1. 以上XML格式的字符串订单以HTTP POST方式发送，客户端发起请求后，圆通电子面单接口在http response里把电子面单信息同步给客户端。
2. 在POST时用“logistics_interface”字段表示要发送的XML经过URL编码之后的内容；
3. 在POST时用“data_digest”字段进行签名验证。签名使用MD5方式，对logistics_interface的内容进行签名。原理为：通知内容（xml）+partnerId，然后进行MD5，转换为Base64字符串，然后在经过URL编码。
详细解释如下：
         假设xml内容为： &lt;order&gt;&lt;/order&gt;， partnerId为123456
         对xml内容&lt;order&gt;&lt;/order&gt;进行URL编码（字符集UTF-8）为%3Corder%3E%3C%2Forder%3E
         签名内容为&lt;order&gt;&lt;/order&gt;123456，经过md5和base64后为LghTkEmsD2tbQ3fsIBRcBg==
         对签名的字符串进行URL编码，LghTkEmsD2tbQ3fsIBRcBg==的内容变为：LghTkEmsD2tbQ3fsIBRcBg%3D%3D
         最终要发送的数据为：
        logistics_interface=%3Corder%3E%3C%2Forder%3E&amp;data_digest=LghTkEmsD2tbQ3fsIBRcBg%3D%3D&amp;type=online&amp;clientId=ECNAME

总结如下：
a、在POST时用“logistics_interface”字段表示要发送的XML报文经过URL编码后的内容。
b、在POST时用“data_digest”字段进行签名验证。签名使用MD5方式，对logistics_interface的内容进行签名。原理为：通知内容（xml）+partnerId，然后进行MD5，转换为Base64字符串，然后在经过URL编码。
c、假设xml内容为： ， partnerId为123456。对xml内容（）进行URL编码（字符集UTF-8）为%3Corder%3E%3C%2Forder%3E。 签名内容为123456，经过md5和base64后为LghTkEmsD2tbQ3fsIBRcBg== 。对签名的字符串进行URL编码，LghTkEmsD2tbQ3fsIBRcBg==的内容变为：LghTkEmsD2tbQ3fsIBRcBg%3D%3D
d、最终要发送的数据为：logistics_interface=%3Corder%3E%3C%2Forder%3E &amp;data_digest= LghTkEmsD2tbQ3fsIBRcBg%3D%3D &amp;type=offline&amp;clientId=K21000119
</code></pre><h1 id="五、-参数列表"><a href="#五、-参数列表" class="headerlink" title="五、    参数列表"></a>五、    参数列表</h1><p>参见<a href="http://open.yto.net.cn/OpenPlatform/doc" target="_blank" rel="noopener">官方文档</a></p>
<h1 id="六、代码示例"><a href="#六、代码示例" class="headerlink" title="六、代码示例"></a>六、代码示例</h1><pre><code>1、封装请求参数(
图中JSONObject使用的是 
    &lt;dependency&gt;
        &lt;groupId&gt;org.json&lt;/groupId&gt;
        &lt;artifactId&gt;json&lt;/artifactId&gt;
        &lt;version&gt;20180813&lt;/version&gt;
    &lt;/dependency&gt;)
</code></pre><p><a href="http://stleary.github.io/JSON-java/index.html" target="_blank" rel="noopener">org.json文档</a><br><img src="/2019/05/13/圆通开放平台订单对接/img1.png" alt><br>    2、加密后发送请求<br><img src="/2019/05/13/圆通开放平台订单对接/img2.png" alt></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/08/自动化测试之cucumber/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="林明星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/08/自动化测试之cucumber/" class="post-title-link" itemprop="url">自动化测试之cucumber.md</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-08 14:27:19" itemprop="dateCreated datePublished" datetime="2019-05-08T14:27:19+08:00">2019-05-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-09 15:32:14" itemprop="dateModified" datetime="2019-05-09T15:32:14+08:00">2019-05-09</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h1><p>cucumber是BDD(Behavior-driven development，行为驱动开发)的一个自动化测试的副产品。它使用自然语言来描述测试，使得非程序员可以理解他们。Gherkin是这种自然语言测试的简单语法，而Cucumber是可以执行它们的工具。关于BDD有兴趣自行了解。附cucumber<a href="https://cucumber.io/" title="cucumber官网" target="_blank" rel="noopener">官网链接</a>，里面也有关于BDD的信息。<br>cucumber本质上是使用根据正则表达式匹配自然语言，然后依次执行对应的方法，以达到测试的目的。</p>
<h1 id="二、安装"><a href="#二、安装" class="headerlink" title="二、安装"></a>二、安装</h1><pre><code>cucumber支持JDK8，创建一个mvn工程，在pom.xml文件引入以下依赖即可。
另外如果测试框架采用的是junit，则需要多一个cucumber-junit。
如果集成spring,则还需要引入cucumber-spring
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">     &lt;groupId&gt;info.cukes&lt;/groupId&gt;</span><br><span class="line">     &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;</span><br><span class="line">     &lt;version&gt;1.2.4&lt;/version&gt;</span><br><span class="line">     &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line"> &lt;/dependency&gt;</span><br><span class="line"> &lt;dependency&gt;</span><br><span class="line">     &lt;groupId&gt;info.cukes&lt;/groupId&gt;</span><br><span class="line">     &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;</span><br><span class="line">     &lt;version&gt;1.2.4&lt;/version&gt;</span><br><span class="line">     &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line"> &lt;/dependency&gt;</span><br><span class="line"> &lt;dependency&gt;</span><br><span class="line">     &lt;groupId&gt;info.cukes&lt;/groupId&gt;</span><br><span class="line">     &lt;artifactId&gt;cucumber-spring&lt;/artifactId&gt;</span><br><span class="line">     &lt;version&gt;1.2.4&lt;/version&gt;</span><br><span class="line">     &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line"> &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<pre><code>也可以根据mvn骨架创建cucumber项目。打开终端，转到要创建项目的目录（比如本文是hellocucumber)，运行以下命令
</code></pre> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> mvn archetype:generate                  </span><br><span class="line">-DarchetypeGroupId=io.cucumber           </span><br><span class="line">-DarchetypeArtifactId=cucumber-archetype </span><br><span class="line">-DarchetypeVersion=2.3.1.2               </span><br><span class="line">-DgroupId=hellocucumber                  </span><br><span class="line">-DartifactId=hellocucumber              </span><br><span class="line">-Dpackage=hellocucumber                  </span><br><span class="line">-Dversion=1.0.0-SNAPSHOT                 </span><br><span class="line">-DinteractiveMode=false</span><br></pre></td></tr></table></figure>
<pre><code>应该得到如下结果:
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[INFO] Project created from Archetype in dir:   hellocucumber/cucumber</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<pre><code>但是不支持jdk8 U51之后的新版本！每次都报错说&quot;Wrong type at constant pool index&quot;。
</code></pre><h1 id="三、基本语法"><a href="#三、基本语法" class="headerlink" title="三、基本语法"></a>三、基本语法</h1><h2 id="3-1-Gherkin"><a href="#3-1-Gherkin" class="headerlink" title="3.1 Gherkin"></a>3.1 Gherkin</h2><pre><code>Cucumber 执行 .feature 文件，而这些文件包含可执行的规范，用被称为 Gherkin 的语言写成。.featur文件一般放在src/test/resources/[项目名称xxx]目录下或者其子目录下。

Gherkin 是带有一点额外结构的纯文本的英文(或者替他60多种语言). Gherkin 设计为容易被非编程人员学习，但有足够的组织结构来容许简洁的范例描述，以说明大多数实际领域中的业务规则。
下面是一个简单的.feature 文件的例子
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Feature: Refund item</span><br><span class="line"></span><br><span class="line">Scenario: Jeff returns a faulty microwave</span><br><span class="line">    Given Jeff has bought a microwave for $100</span><br><span class="line">    And he has a receipt</span><br><span class="line">    When he returns the microwave</span><br><span class="line">    Then Jeff should be refunded $100</span><br></pre></td></tr></table></figure>
<pre><code>在 Gherkin 中, 每行必须以 Gherkin 关键字开头, 然后跟随有任意的文本。主要的关键字有：
</code></pre><ul>
<li>Feature / 特性</li>
<li>Scenario / 场景</li>
<li>Given, When, Then, And, But (Steps/步骤)</li>
<li>Background / 背景</li>
<li>Scenario Outline / 场景大纲</li>
<li><p>Examples / 示例</p>
<p>  还有其他一些额外的关键字:</p>
</li>
<li><p>“”” (Doc Strings)</p>
</li>
<li>| (Data Tables)</li>
<li>@ (Tags)</li>
<li># Comments</li>
</ul>
<hr>
<h2 id="3-2-Feature-特性"><a href="#3-2-Feature-特性" class="headerlink" title="3.2 Feature / 特性"></a>3.2 Feature / 特性</h2><pre><code>.feature 文件用来描述系统的一个单一特性，或者某个特性的一个独特方面。这仅仅是一个提供软件特性的高级描述的方法，并用于组织相关的场景(scenarios)。
feature有三个基本元素：
1.Feature: 关键字
2.name： 名称, 在同一行
3.description：描述, 可选（但是强烈推荐），可以占据多行   
例如：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Feature: Refund item</span><br><span class="line"></span><br><span class="line">  Sales assistants should be able to refund customers&apos; purchases.</span><br><span class="line">  This is required by the law, and is also essential in order to</span><br><span class="line">  keep customers happy.</span><br><span class="line"></span><br><span class="line">  Rules:</span><br><span class="line">  - Customer must present proof of purchase</span><br><span class="line">  - Purchase must be less than 30 days ago</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="3-3-Scenario-场景"><a href="#3-3-Scenario-场景" class="headerlink" title="3.3 Scenario / 场景"></a>3.3 Scenario / 场景</h2><pre><code>Scenario 是具体的实例，描述一个业务规则。它由步骤列表组成。
可以有任意多个步骤，但是推荐数量保持在每个场景3-5个步骤。如果太长，他们将丧失作为规范和文档的表单能力。
在作为规范和文档之外，场景也同样是测试。作为一个整体，场景是系统的可执行规范。
场景遵循同样的模式：
1、 描述一个初始化上下文
2、 描述一个时间
3、 描述一个期望的产出
</code></pre><hr>
<h2 id="3-4-Steps-步骤"><a href="#3-4-Steps-步骤" class="headerlink" title="3.4 Steps / 步骤"></a>3.4 Steps / 步骤</h2><pre><code>步骤通常以 Given, When 或 Then 开头。如果有多个 Given 或者 When 步骤连在一
起，可以使用 And 或者 But。Cucumber不区分这些关键字，但是选择正确的关键字对于
场景整体的可读性很重要。
</code></pre><hr>
<h2 id="3-5-Given-假设"><a href="#3-5-Given-假设" class="headerlink" title="3.5 Given / 假设"></a>3.5 Given / 假设</h2><pre><code>Given 步骤用于描述系统的初始化上下文 - 场景的一幕(scene of Scenario)。它通常是某些已经发生在过去的东西。
当cucumber执行 Given 步骤时，它将配置系统到一个定义良好的状态，例如创建并配置对象或者添加数据到测试数据库。
可以有多个 Given 步骤（可以使用 And 或者 But 来变的更可读）
</code></pre><hr>
<h2 id="3-6-Then-那么"><a href="#3-6-Then-那么" class="headerlink" title="3.6 Then / 那么"></a>3.6 Then / 那么</h2><pre><code>Then 步骤用于描述期望的产出，或者结果。
Then 步骤的 步骤定义 应该使用断言来比较实际产出(系统实际行为)和期待产出(步骤所述的系统应有的行为)
</code></pre><hr>
<h2 id="3-7-Background-背景"><a href="#3-7-Background-背景" class="headerlink" title="3.7 Background / 背景"></a>3.7 Background / 背景</h2><pre><code>发现一个feature文件中的所有场景都在重复同样的 Given 步骤。既然它在每个场景
可以将这样的 Given 步骤移动到background中，在第一个场景之前，用一个 Background 块组织他们：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Background:</span><br><span class="line">  Given a $100 microwave was sold on 2015-11-03</span><br><span class="line">  And today is 2015-11-18</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="3-8-Scenario-Outline-场景大纲"><a href="#3-8-Scenario-Outline-场景大纲" class="headerlink" title="3.8 Scenario Outline / 场景大纲"></a>3.8 Scenario Outline / 场景大纲</h2><pre><code>当有复杂业务规则，带有多个输入或者输出，可以最终创建仅仅是值有差别的多个场景。举个例子:
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Scenario: feeding a small suckler cow</span><br><span class="line">    Given the cow weighs 450 kg</span><br><span class="line">    When we calculate the feeding requirements</span><br><span class="line">    Then the energy should be 26500 MJ</span><br><span class="line">    And the protein should be 215 kg</span><br><span class="line"></span><br><span class="line">Scenario: feeding a medium suckler cow</span><br><span class="line">    Given the cow weighs 500 kg</span><br><span class="line">    When we calculate the feeding requirements</span><br><span class="line">    Then the energy should be 29500 MJ</span><br><span class="line">    And the protein should be 245 kg</span><br><span class="line"></span><br><span class="line"># 还有两个例子 --- 已经令人厌烦了</span><br></pre></td></tr></table></figure>
<pre><code>如果有很多例子，将会很乏味。可以通过使用场景大纲来简化：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Scenario Outline: feeding a suckler cow</span><br><span class="line">    Given the cow weighs &lt;weight&gt; kg</span><br><span class="line">    When we calculate the feeding requirements</span><br><span class="line">    Then the energy should be &lt;energy&gt; MJ</span><br><span class="line">    And the protein should be &lt;protein&gt; kg</span><br><span class="line"></span><br><span class="line">    Examples:</span><br><span class="line">        | weight | energy | protein |</span><br><span class="line">        |    450 |  26500 |     215 |</span><br><span class="line">        |    500 |  29500 |     245 |</span><br><span class="line">        |    575 |  31500 |     255 |</span><br><span class="line">        |    600 |  37000 |     305 |</span><br></pre></td></tr></table></figure>
<pre><code>这更易于阅读。场景大纲步骤中的变量通过使用 &lt; 和 &gt; 来标记。
</code></pre><hr>
<h2 id="3-9-Examples-示例"><a href="#3-9-Examples-示例" class="headerlink" title="3.9 Examples / 示例"></a>3.9 Examples / 示例</h2><pre><code>场景大纲部分总被带有一个或者多个 Examples / 示例 部分，用于包含一个表格。
表格必须有header 行，对应场景大纲步骤中的变量。
下面的每一行将创建一个新的场景，使用变量的值填充。
</code></pre><hr>
<h2 id="3-10-执行步骤"><a href="#3-10-执行步骤" class="headerlink" title="3.10 执行步骤"></a>3.10 执行步骤</h2><pre><code>当cucumber执行场景中的步骤时，它将查找匹配的步骤定义来执行。
步骤定义是带有正则表达式的小段代码。正则表达式用于连接步骤定义到所有匹配的步骤，而代码是cucumber要执行的内容。
例如一下场景：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Scenario: Some cukes</span><br><span class="line">    Given I have 48 cukes in my belly</span><br></pre></td></tr></table></figure>
<pre><code>步骤的 I have 48 cukes in my belly 部分（Given关键字后面的文本）将匹配下面的步骤定义：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Given(&quot;I have (\\d+) cukes in my belly&quot;)</span><br><span class="line">public void I_have_cukes_in_my_belly(int cukes)&#123;</span><br><span class="line">    System.out.format(&quot;Cukes: %n\n&quot;, cukes);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>当cucumber匹配步骤到一个步骤定义中的正则表达式时，它传递所有捕获组（capture group）的值到步骤定义的参数。捕获组是字符串(即使他们匹配数字如 \d+ )。对于静态类型语言，cucumber将自动转换这些字符串到合适的类型。对于动态类型语言，默认不转换，因为他们没有类型信息。
Cucumber不区分这五个步骤关键字 Given， When， Then， And 和 But。
</code></pre><h1 id="四、实践"><a href="#四、实践" class="headerlink" title="四、实践"></a>四、实践</h1><h2 id="4-1编写-feature文件"><a href="#4-1编写-feature文件" class="headerlink" title="4.1编写.feature文件"></a>4.1编写.feature文件</h2><p><img src="/2019/05/08/自动化测试之cucumber/cucumber1.png" alt="cucumber1"><br>    .features文件一般放在test/resources/features目录下。<br>    图中使用的是中文来编写的，这样写的前提是在首行加上 # language: zh-CN<br>    一个场景为一个执行单位，一般用于测试一个接口。每个步骤都会通过正则匹配一个方法。<br>    步骤写好后，鼠标点击黄色色块上，按下自动提示快捷键，编译器会提示定义step。按提示创建即可。</p>
<h2 id="4-2编写步骤steps类"><a href="#4-2编写步骤steps类" class="headerlink" title="4.2编写步骤steps类"></a>4.2编写步骤steps类</h2><pre><code>如下图：
</code></pre><p><img src="/2019/05/08/自动化测试之cucumber/cucumber2.png" alt="cucumber2"><br>     图中@cucumber.api.java.zh_CN报红，只要将cucumber.api.java.zh_CN删除，重新导入即可。或者将CN改为小写的cn。<br>    steps类一般放在test/java/项目包名/目录下的一个文件夹中。<br>    每个方法中编写测试代码，去测试某个接口。接口的访问可以使用RestTemplate。使用Assert判断接口返回是否与预期的一样。</p>
<pre><code>一个完整的场景，包括以下几个步骤：
1、新建测试数据
2、调用接口进行测试
3、删除测试数据
这样可以重复测试，不会产生多余的测试数据。
</code></pre><h2 id="4-3-启动测试"><a href="#4-3-启动测试" class="headerlink" title="4.3 启动测试"></a>4.3 启动测试</h2><pre><code>启动测试有两种方法，
1、右键.feature文件，选择Debug Feature执行
2、如下图，编写测试类去启动@CucumberOptions注解的features属性对应.feature文件
</code></pre><p><img src="/2019/05/08/自动化测试之cucumber/cucumber3.png" alt="cucumber3"></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/01/hexo的安装与使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="林明星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/01/hexo的安装与使用/" class="post-title-link" itemprop="url">Hexo安装与使用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-01 22:47:59" itemprop="dateCreated datePublished" datetime="2019-05-01T22:47:59+08:00">2019-05-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-13 16:18:45" itemprop="dateModified" datetime="2019-05-13T16:18:45+08:00">2019-05-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Hexo安装与使用"><a href="#Hexo安装与使用" class="headerlink" title="Hexo安装与使用"></a>Hexo安装与使用</h1><h2 id="1、前提条件"><a href="#1、前提条件" class="headerlink" title="1、前提条件"></a>1、前提条件</h2><pre><code>Node.js、git

安装git:
    Windows：下载并安装 [git](https://git-scm.com/download/win)
    Mac：使用 Homebrew, MacPorts ：brew install git;或下载 安装程序 安装。
    Linux (Ubuntu, Debian)：sudo apt-get install git-core
    Linux (Fedora, Red Hat, CentOS)：sudo yum install git-core

安装Node.js：
    安装Node.js的最佳方式是使用nvm
    curl方式安装nvm:
        curl https://raw.github.com/creationix/nvm/v0.33.11/install.sh | sh
    wget方式安装nvm:
        wget -qO- https://raw.github.com/creationix/nvm/v0.33.11/install.sh | sh
    安装完成后，重启终端并执行下列命令即可安装 Node.js。
        nvm install stable
</code></pre><p>$ nvm install stable</p>
<h2 id="2、安装"><a href="#2、安装" class="headerlink" title="2、安装"></a>2、安装</h2><pre><code>npm install -g hexo-cli
</code></pre><h2 id="3、建站"><a href="#3、建站" class="headerlink" title="3、建站"></a>3、建站</h2><pre><code>在指定文件夹执行以下指令
    1、hexo init
    2、npm install
新建完成后，文件夹目录如下
    .
    ├── _config.yml
    ├── package.json
    ├── scaffolds
    ├── source
    |   ├── _drafts
    |   └── _posts
    └── themes
</code></pre><h3 id="3-1、展示分类菜单"><a href="#3-1、展示分类菜单" class="headerlink" title="3.1、展示分类菜单"></a>3.1、展示分类菜单</h3><pre><code>首先打开主题目录下的config.xml文件，找到menu节点，放开被注释的categories。
再在根目录下执行hexo new page categories，这时source目录下生成categories文件夹，里面有一个index.md文件。修改文件内容为以下即可： 
---
title: categories
date: 2019-05-02 08:36:58
type: categories
---
</code></pre><h3 id="3-2、展示标签菜单"><a href="#3-2、展示标签菜单" class="headerlink" title="3.2、展示标签菜单"></a>3.2、展示标签菜单</h3><pre><code>首先打开主题目录下的config.xml文件，找到menu节点，放开被注释的tags。
再在根目录下执行hexo new page tags，这时source目录下生成tags文件夹，里面有一个index.md文件。修改文件内容为以下即可： 
---
title: tags
date: 2019-05-02 08:36:58
type: tags
---
</code></pre><h2 id="4、写作"><a href="#4、写作" class="headerlink" title="4、写作"></a>4、写作</h2><pre><code>执行命令：
hexo new [layout] &lt;title&gt; 
默认为 post，可以通过修改 _config.yml 中的 default_layout 参数来指定默认布局
</code></pre><h2 id="5、服务器"><a href="#5、服务器" class="headerlink" title="5、服务器"></a>5、服务器</h2><pre><code>Hexo 3.0 把服务器独立成了个别模块，您必须先安装 hexo-server 才能使用
执行：
    npm install hexo-server --save
安装完成后，输入以下命令以启动服务器，您的网站会在 http://localhost:4000 下启动。在服务器启动期间，Hexo 会监视文件变动并自动更新，您无须重启服务器
执行：
    hexo server（简写hexo s）
也可以自定义端口，执行：
    hexo server -p 5000
这样开启的服务器为动态模式。    

执行以下命令为静态模式：
    hexo server -s
在静态模式下，服务器只处理 public 文件夹内的文件，而不会处理文件变动，在执行时，您应该先自行执行 hexo generate（简写hexo g），此模式通常用于生产环境（production mode）下。
</code></pre><h2 id="6、部署"><a href="#6、部署" class="headerlink" title="6、部署"></a>6、部署</h2><pre><code>Hexo 提供了快速方便的一键部署功能，让您只需一条命令就能将网站部署到服务器上。

在部署之前，您必须先在 _config.yml 中修改参数，这里以git为例，将项目部署到git上。
执行： 
    npm install hexo-deployer-git --save
修改配置:
    deploy:
  type: git
  repo: &lt;repository url&gt; #https://bitbucket.org/JohnSmith/johnsmith.bitbucket.io
  branch: [branch] #published
  message: [自定义提交信息]

配置完成后，执行以下命令即可：
    hexo deploy（简写hexo d）
</code></pre><p><a href="https://hexo.io/zh-cn/docs/deployment" target="_blank" rel="noopener">hexo官网文档</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/30/cordova与js互调（以信鸽为例）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="林明星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/30/cordova与js互调（以信鸽为例）/" class="post-title-link" itemprop="url">Cordova与原生安卓互相调用（混合app开发）</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-30 16:08:37" itemprop="dateCreated datePublished" datetime="2019-04-30T16:08:37+08:00">2019-04-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-15 16:10:41" itemprop="dateModified" datetime="2019-05-15T16:10:41+08:00">2019-05-15</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/混合app开发/" itemprop="url" rel="index"><span itemprop="name">混合app开发</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一、Js调用cordova安卓插件"><a href="#一、Js调用cordova安卓插件" class="headerlink" title="一、Js调用cordova安卓插件"></a>一、Js调用cordova安卓插件</h2><h3 id="1、以集成腾讯信鸽为例"><a href="#1、以集成腾讯信鸽为例" class="headerlink" title="1、以集成腾讯信鸽为例"></a>1、以集成腾讯信鸽为例</h3><pre><code>a、需求：在js中获取原生安卓注册后返回的信鸽token。
b、分析：在安卓端以cordova插件形式暴露一个获取token的方法。在js中使用cordova去调用
c、安卓部分代码实现：
    在安卓中新建GetXingeToken类，并集成CordovaPlugin类，集成实现execute方法，循环获取token，知道token部位null时，返回。
    callbackContext.success(&quot;&quot;)方法表示成功，参数表示成功的信息。
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException &#123;</span><br><span class="line">    Object token = MainActivity.token;</span><br><span class="line">    //当信鸽token为null时循环获取，知道token不为null时返回给前台（这种做法会阻塞线程，故改为在js中定时获取token。）</span><br><span class="line">&lt;!--    while(token == null)&#123;</span><br><span class="line">        token = MainActivity.token;</span><br><span class="line">    &#125;--&gt;</span><br><span class="line">    callbackContext.success(token == null ? null : token.toString());</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>打开res下xml目录下的config.xml,添加以下代码。GetXingeToken即是该插件的名称，value是刚才创建的GetXingeToken类的全限定名。
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;feature name=&quot;GetXingeToken&quot;&gt;</span><br><span class="line">    &lt;param name=&quot;android-package&quot; value=&quot;org.apache.cordova.xinge.GetXingeToken&quot; /&gt;</span><br><span class="line">    &lt;param name=&quot;onload&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">&lt;/feature&gt;</span><br></pre></td></tr></table></figure>
<pre><code>d、js部分代码实现
    deviceready是Cordova完全加载后，事件才会触发，这样可以保证
    能够成功的调用Cordova函数。
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--document.addEventListener(&quot;deviceready&quot;, onDeviceReady =&gt; &#123;</span><br><span class="line">    //cordova.exec 执行操作</span><br><span class="line">    cordova.exec(function (msg) &#123;</span><br><span class="line">      // alert(&apos;test成功了&apos; + msg)</span><br><span class="line">      console.log(&quot;----XingeToken:&quot; + msg);</span><br><span class="line">      localStorage.setItem(&quot;xingeToken&quot;,msg);</span><br><span class="line">    &#125;, function (msg) &#123;</span><br><span class="line">      // alert(&apos;test失败了&apos;)</span><br><span class="line">    &#125;, &quot;GetXingeToken&quot;, &quot;testAction&quot;, [&apos;传递的参数&apos;]);</span><br><span class="line">&#125;, false);--&gt;</span><br><span class="line"></span><br><span class="line">//因为在执行到这一步的时候，信鸽token可能还没有注册好。所以每隔3秒获取一次token，知道token不为null时为止。</span><br><span class="line">document.addEventListener(&quot;deviceready&quot;, onDeviceReady =&gt; &#123;</span><br><span class="line">    //cordova.exec 执行操作</span><br><span class="line">    var timer = setInterval(() =&gt; &#123;</span><br><span class="line">      cordova.exec(function (msg) &#123;</span><br><span class="line">        // alert(&apos;test成功了&apos; + msg)</span><br><span class="line">        console.log(&quot;----XingeToken:&quot; + msg);</span><br><span class="line">        if(msg != null)&#123;</span><br><span class="line">          clearInterval(timer);</span><br><span class="line">          localStorage.setItem(&quot;xingeToken&quot;,msg);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, function (msg) &#123;</span><br><span class="line">        // alert(&apos;test失败了&apos;)</span><br><span class="line">      &#125;, &quot;GetXingeToken&quot;, &quot;testAction&quot;, [&apos;传递的参数&apos;]);</span><br><span class="line">    &#125;,3000);</span><br><span class="line">  &#125;, false);</span><br></pre></td></tr></table></figure>
<h2 id="二、安卓调用js插件"><a href="#二、安卓调用js插件" class="headerlink" title="二、安卓调用js插件"></a>二、安卓调用js插件</h2><pre><code>a、js端代码：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    &lt;!-- android调用js方法 --&gt;</span><br><span class="line">    function showAlert(content)&#123;</span><br><span class="line">        alert(content);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<pre><code>b、安卓端调用代码
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends CordovaActivity &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">            super.onCreate(savedInstanceState);</span><br><span class="line">            // Set by &lt;content src=&quot;index.html&quot; /&gt; in config.xml</span><br><span class="line">            loadUrl(launchUrl);</span><br><span class="line">            new Thread(new Runnable() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public void run() &#123;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        Thread.sleep(10000);</span><br><span class="line">                        runOnUiThread(new Runnable() &#123;</span><br><span class="line">                            @Override</span><br><span class="line">                            public void run() &#123;</span><br><span class="line">                                //不能在子线程中执行webview的方法</span><br><span class="line">                                loadUrl(&quot;javascript:showAlert(\&quot;你好\&quot;)&quot;);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<pre><code>在子线程中等待了10秒然后在主线程中去调用js的方是为了让js加载完成后再调用。
</code></pre><h2 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h2><pre><code>在使用信鸽时遇到过一个需求，需要根据不同种类的消息，跳转至不同的页面，因为时webapp，所以只能再js中控制跳转。当接收到消息并点击后，再receiver中携带通知消息跳转到MainActivity，在MainActivity的onNewIntent方法中使用loadUrl调用js方法，实现跳转。关键代码如下。
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">//MessageReceiver方法，继承XGPushBaseReceiver</span><br><span class="line">// 通知点击回调 actionType=1为该消息被清除，actionType=0为该消息被点击。此处不能做点击消息跳转，详细方法请参照官网的Android常见问题文档</span><br><span class="line">    @Override</span><br><span class="line">    public void onNotifactionClickedResult(Context context,</span><br><span class="line">                                           XGPushClickedResult message) &#123;</span><br><span class="line">//        Log.e(&quot;LC&quot;, &quot;+++++++++++++++ 通知被点击 跳转到指定页面。&quot;);</span><br><span class="line">        NotificationManager notificationManager = (NotificationManager) context</span><br><span class="line">                .getSystemService(Context.NOTIFICATION_SERVICE);</span><br><span class="line">        notificationManager.cancelAll();</span><br><span class="line">        if (context == null || message == null) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        if (message.getActionType() == XGPushClickedResult.NOTIFACTION_CLICKED_TYPE) &#123;</span><br><span class="line">            // 通知在通知栏被点击啦。。。。。</span><br><span class="line">            // APP自己处理点击的相关动作</span><br><span class="line">            // 这个动作可以在activity的onResume也能监听，请看第3点相关内容</span><br><span class="line">            Intent intent = null;</span><br><span class="line">            intent=new Intent(context,MainActivity.class);</span><br><span class="line">            String customContent = message.getCustomContent();</span><br><span class="line">            intent.putExtra(&quot;customContent&quot;,customContent);</span><br><span class="line">            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);</span><br><span class="line">            context.startActivity(intent);</span><br><span class="line">        &#125; else if (message.getActionType() == XGPushClickedResult.NOTIFACTION_DELETED_TYPE) &#123;</span><br><span class="line">            // 通知被清除啦。。。。</span><br><span class="line">            // APP自己处理通知被清除后的相关动作</span><br><span class="line">        &#125;</span><br><span class="line">        // 获取自定义key-value</span><br><span class="line">        String customContent = message.getCustomContent();</span><br><span class="line">        if (customContent != null &amp;&amp; customContent.length() != 0) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                JSONObject obj = new JSONObject(customContent);</span><br><span class="line">                // key1为前台配置的key</span><br><span class="line">                if (!obj.isNull(&quot;message_id&quot;)) &#123;</span><br><span class="line">                    String value = obj.getString(&quot;message_id&quot;);</span><br><span class="line">//                    Log.d(LogTag, &quot;get custom value message_id:&quot; + value);</span><br><span class="line">                &#125;</span><br><span class="line">                if (!obj.isNull(&quot;message_cat&quot;)) &#123;</span><br><span class="line">                    String value = obj.getString(&quot;message_cat&quot;);</span><br><span class="line">//                    Log.d(LogTag, &quot;get custom value message_cat:&quot; + value);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125; catch (JSONException e) &#123;</span><br><span class="line">//                Log.d(LogTag,e.getMessage());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">//MainActivity方法</span><br><span class="line">@Override</span><br><span class="line">protected void onNewIntent(Intent intent) &#123;</span><br><span class="line">    super.onNewIntent(intent);</span><br><span class="line">    getIntentData(intent);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private void getIntentData(Intent intent) &#123;</span><br><span class="line">    if(intent!=null)&#123;</span><br><span class="line">        Bundle extras = intent.getExtras();</span><br><span class="line">        if(extras != null)&#123;</span><br><span class="line">            Object customContent = extras.get(&quot;customContent&quot;);</span><br><span class="line">            if(customContent != null)&#123;</span><br><span class="line">                loadUrl(&quot;javascript:toInfo(&quot;+customContent+&quot;)&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//js方法</span><br><span class="line">function toInfo(customContent) &#123;</span><br><span class="line">    console.log(customContent);</span><br><span class="line">    if(customContent.infoType == &quot;1&quot; || customContent.infoType == &quot;2&quot; || customContent.infoType == &quot;4&quot;)&#123;</span><br><span class="line">      var deviceid = customContent.deviceid;</span><br><span class="line">      var lat = customContent.lat;</span><br><span class="line">      var lon = customContent.lon;</span><br><span class="line">      var time = customContent.time;</span><br><span class="line">      location.href = &quot;file:///android_asset/www/index.html#/location?deviceid=&quot;+deviceid+&quot;&amp;lat=&quot;+lat+&quot;&amp;lon=&quot;+lon+&quot;&amp;time=&quot;+time+&quot;&amp;flag=2&quot;;</span><br><span class="line">    &#125;else if(customContent.infoType = &quot;5&quot;)&#123;</span><br><span class="line">      location.href = &quot;file:///android_asset/www/index.html#/sysInfo&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/30/vue跨域问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="林明星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/30/vue跨域问题/" class="post-title-link" itemprop="url">Vue跨域问题</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-30 16:08:37" itemprop="dateCreated datePublished" datetime="2019-04-30T16:08:37+08:00">2019-04-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-14 14:28:36" itemprop="dateModified" datetime="2019-05-14T14:28:36+08:00">2019-05-14</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/vue/" itemprop="url" rel="index"><span itemprop="name">vue</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1、本地解决vue跨域问题"><a href="#1、本地解决vue跨域问题" class="headerlink" title="1、本地解决vue跨域问题"></a>1、本地解决vue跨域问题</h1><p>在congif/index.js的dev节点下中配置如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">proxyTable: &#123;</span><br><span class="line">  &apos;/api/teamall&apos;: &#123;</span><br><span class="line">    target: &apos;https://fnrscm.zntrade.cn&apos;,</span><br><span class="line">    changeOrigin: true,</span><br><span class="line">    secure: false,</span><br><span class="line">    pathRewrite: &#123;</span><br><span class="line">      &quot;^/api/teamall&quot;: &quot;&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>/api/teamall是自己添加的前缀。该前缀可以使用aiox属性添加。在main.js中添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">import Axios from &apos;axios&apos;</span><br><span class="line">import VueAxios from &apos;vue-axios&apos;</span><br><span class="line">Vue.use(VueAxios, Axios)</span><br><span class="line">Axios.defaults.baseURL = &apos;api/teamall/&apos;  这样也ok的</span><br><span class="line">```	</span><br><span class="line"></span><br><span class="line">判断是开发模式还是本地模式，其实不需要这么麻烦 直接</span><br><span class="line"></span><br><span class="line">	const isProdMode = Object.is(process.env.NODE_ENV, &apos;production&apos;);</span><br><span class="line">	module.exports = &#123;</span><br><span class="line">	  baseUrl: isProdMode ? &apos;api.shudong.wang/v1/&apos; : &apos;v1/&apos;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">页面中访问</span><br><span class="line"></span><br><span class="line">	methods:&#123;</span><br><span class="line">	    getArticleList()&#123;</span><br><span class="line">	      console.log(111111111)</span><br><span class="line">	          this.$http.get(&quot;/article/list&quot;) // this.$http  axios使用的一种方式</span><br><span class="line">	          .then((response)=&gt;&#123;</span><br><span class="line">	              console.log(response.data)</span><br><span class="line">	              let res = response.data;</span><br><span class="line">	              this.articleList = res.data;</span><br><span class="line">		</span><br><span class="line">	          &#125;)</span><br><span class="line">	          .catch((error) =&gt;&#123;</span><br><span class="line">	            console.log(error)</span><br><span class="line">	          &#125;)</span><br><span class="line">	    &#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	</span><br><span class="line">上面请求的例子中相当于访问： localhost:8080/api/teamall/article/list</span><br><span class="line"></span><br><span class="line">这样就可以解决跨域问题，其实最终访问的是 localhost:3000/article/list</span><br><span class="line">	</span><br><span class="line"># 2、服务器端解决vue跨域问题</span><br><span class="line">	</span><br><span class="line">本地可以使用proxyTable 解决跨域问题，那么服务端怎么解决跨域问题呢？</span><br><span class="line"></span><br><span class="line">答案：使用nginx反向代理</span><br></pre></td></tr></table></figure>
<p>server<br>    {<br>        listen 80;</p>
<pre><code>    #listen [::]:80;
    server_name zhenfan.shudong.wang ; #  你的域名不需要加http 
    index index.html index.htm index.php default.html default.htm default.php;
    root  /home/wwwroot/zhenfan/dist;


    include none.conf;
    #error_page   404   /404.html;

    # Deny access to PHP files in specific directory
    #location ~ /(wp-content|uploads|wp-includes|images)/.*\.php$ { deny all; }

    include enable-php.conf;

    location /api/teamall {
       proxy_pass http://127.0.0.1:3000/; # 当访问v1的时候默认转发到 3000端
    }

    location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
    {
        expires      30d;
    }

    location ~ .*\.(js|css)?$
    {
        expires      12h;
    }

    location ~ /.well-known {
        allow all;
    }

    location ~ /\.
    {
        deny all;
    }

    access_log off;
}
</code></pre><p><code>`</code>    </p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/30/java知识点/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="林明星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/30/java知识点/" class="post-title-link" itemprop="url">Java知识点小记</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-30 16:08:37" itemprop="dateCreated datePublished" datetime="2019-04-30T16:08:37+08:00">2019-04-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-29 15:07:32" itemprop="dateModified" datetime="2019-05-29T15:07:32+08:00">2019-05-29</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/混合app开发/" itemprop="url" rel="index"><span itemprop="name">混合app开发</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1、java获取src-resources目录下的文件"><a href="#1、java获取src-resources目录下的文件" class="headerlink" title="1、java获取src/resources目录下的文件"></a>1、java获取src/resources目录下的文件</h2><pre><code>1、System.out.println(this.getClass().getClassLoader().getResource(&quot;test.xml&quot;).getPath());
2、System.out.println(this.getClass().getClassLoader().getResource(&quot;test.xml&quot;).getFile());
3、System.out.println(this.getClass().getResource(&quot;/&quot;).getPath()+&quot;test.xml&quot;);
</code></pre><p>当工程部署到Tomcat中时，按照上边方式，则会出现找不到该文件路径的异常。经搜索资料知道，Java工程打包部署到Tomcat中时，test.xml的路径变到顶层（classes下）：</p>
<p>并且，此时读取文件需要采用流（stream）的方式读取，如下：</p>
<pre><code>InputStream in = this.getClass().getResourceAsStream(&quot;/test.xml&quot;)
</code></pre><p>其中properties前的斜杠，相对于调用类，共同的顶层路径。</p>
<h2 id="2、-RequestBody和-ResponseBody"><a href="#2、-RequestBody和-ResponseBody" class="headerlink" title="2、@RequestBody和@ResponseBody"></a>2、@RequestBody和@ResponseBody</h2><p>在SpringMVC中，可以使用@RequestBody和@ResponseBody两个注解，分别完成请求报文到对象和对象到响应报文的转换，底层这种灵活的消息转换机制，就是Spring3.x中新引入的HttpMessageConverter即消息转换器机制。</p>
<p>我们可以用下面的图，简单描述一下这个过程。<br><img src="/2019/04/30/java知识点/img1.png" alt>      </p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/30/java中xml与json互转/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="林明星">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/30/java中xml与json互转/" class="post-title-link" itemprop="url">java中xml与json互转</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-30 16:08:37" itemprop="dateCreated datePublished" datetime="2019-04-30T16:08:37+08:00">2019-04-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-13 17:04:18" itemprop="dateModified" datetime="2019-05-13T17:04:18+08:00">2019-05-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java-xml/" itemprop="url" rel="index"><span itemprop="name">java-xml</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1、json与xml互转"><a href="#1、json与xml互转" class="headerlink" title="1、json与xml互转"></a>1、json与xml互转</h1><h2 id="1-1-json与xml字符串互转demo"><a href="#1-1-json与xml字符串互转demo" class="headerlink" title="1.1 json与xml字符串互转demo"></a>1.1 json与xml字符串互转demo</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import com.gargoylesoftware.htmlunit.javascript.host.xml.XMLSerializer;</span><br><span class="line">import org.json.JSONException;</span><br><span class="line">import org.json.JSONObject;</span><br><span class="line">import org.json.XML;</span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line">import javax.xml.crypto.dsig.XMLSignature;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @Description TODO</span><br><span class="line"> * @Author linmingxing</span><br><span class="line"> * @Date 2019/5/9 上午10:06</span><br><span class="line"> **/</span><br><span class="line">public class DeliverOneATest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        String xml = &quot;&lt;Response&gt;\n&quot; +</span><br><span class="line">                &quot;\t&lt;logisticProviderID&gt;YTO&lt;/logisticProviderID&gt;\n&quot; +</span><br><span class="line">                &quot;\t&lt;txLogisticID&gt;2019050910&lt;/txLogisticID&gt;\n&quot; +</span><br><span class="line">                &quot;\t&lt;clientID&gt;K21000119&lt;/clientID&gt;\n&quot; +</span><br><span class="line">                &quot;\t&lt;mailNo&gt;G10127901493&lt;/mailNo&gt;\n&quot; +</span><br><span class="line">                &quot;\t&lt;distributeInfo&gt;\n&quot; +</span><br><span class="line">                &quot;\t\t&lt;shortAddress&gt;900-074-00-010&lt;/shortAddress&gt;\n&quot; +</span><br><span class="line">                &quot;\t\t&lt;consigneeBranchCode&gt;290082&lt;/consigneeBranchCode&gt;\n&quot; +</span><br><span class="line">                &quot;\t\t&lt;packageCenterCode&gt;290911&lt;/packageCenterCode&gt;\n&quot; +</span><br><span class="line">                &quot;\t\t&lt;packageCenterName&gt;&lt;/packageCenterName&gt;\n&quot; +</span><br><span class="line">                &quot;\t&lt;/distributeInfo&gt;\n&quot; +</span><br><span class="line">                &quot;\t&lt;code&gt;200&lt;/code&gt;\n&quot; +</span><br><span class="line">                &quot;\t&lt;success&gt;true&lt;/success&gt;\n&quot; +</span><br><span class="line">                &quot;&lt;/Response&gt;&quot;;</span><br><span class="line">        try &#123;</span><br><span class="line">            //xml字符串转json</span><br><span class="line">            JSONObject jsonObject = XML.toJSONObject(xml);</span><br><span class="line">            //JSONObject转换为xml字符串</span><br><span class="line">            String s = XML.toString(jsonObject);</span><br><span class="line">            System.out.println(jsonObject.toString());</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-2-将xml文件解析成json"><a href="#1-2-将xml文件解析成json" class="headerlink" title="1.2 将xml文件解析成json"></a>1.2 将xml文件解析成json</h2><pre><code>添加maven依赖：
    &lt;dependency&gt;
        &lt;groupId&gt;org.json&lt;/groupId&gt;
        &lt;artifactId&gt;json&lt;/artifactId&gt;
        &lt;version&gt;20180813&lt;/version&gt;
    &lt;/dependency&gt;

xml文件
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;studentList&gt;</span><br><span class="line">    &lt;student id=&quot;A01&quot; class=&quot;A&quot;&gt;</span><br><span class="line">        &lt;name&gt;小明&lt;/name&gt;</span><br><span class="line">        &lt;age&gt;19&lt;/age&gt;</span><br><span class="line">        &lt;gender&gt;man&lt;/gender&gt;</span><br><span class="line">        &lt;score&gt;</span><br><span class="line">            &lt;subject name=&quot;Advanced Mathematics&quot;&gt;90&lt;/subject&gt;</span><br><span class="line">            &lt;subject name=&quot;College English&quot;&gt;85&lt;/subject&gt;</span><br><span class="line">            &lt;subject name=&quot;C++Programming&quot;&gt;88&lt;/subject&gt;</span><br><span class="line">        &lt;/score&gt;</span><br><span class="line">    &lt;/student&gt;</span><br><span class="line"></span><br><span class="line">    &lt;student id=&quot;A02&quot; class=&quot;B&quot;&gt;</span><br><span class="line">        &lt;name&gt;小红&lt;/name&gt;</span><br><span class="line">        &lt;age&gt;20&lt;/age&gt;</span><br><span class="line">        &lt;gender&gt;woman&lt;/gender&gt;</span><br><span class="line">        &lt;score&gt;</span><br><span class="line">            &lt;subject name=&quot;Data Structure&quot;&gt;80&lt;/subject&gt;</span><br><span class="line">            &lt;subject name=&quot;JavaProgramming&quot;&gt;90&lt;/subject&gt;</span><br><span class="line">        &lt;/score&gt;</span><br><span class="line">    &lt;/student&gt;</span><br><span class="line"></span><br><span class="line">    &lt;student1 id=&quot;A02&quot; class=&quot;B&quot;&gt;</span><br><span class="line">        &lt;name&gt;小红&lt;/name&gt;</span><br><span class="line">        &lt;age&gt;20&lt;/age&gt;</span><br><span class="line">        &lt;gender&gt;woman&lt;/gender&gt;</span><br><span class="line">        &lt;score&gt;</span><br><span class="line">            &lt;subject name=&quot;Data Structure&quot;&gt;80&lt;/subject&gt;</span><br><span class="line">            &lt;subject name=&quot;JavaProgramming&quot;&gt;90&lt;/subject&gt;</span><br><span class="line">        &lt;/score&gt;</span><br><span class="line">    &lt;/student1&gt;</span><br><span class="line">&lt;/studentList&gt;</span><br><span class="line">```	</span><br><span class="line"></span><br><span class="line">	java代码</span><br></pre></td></tr></table></figure>
<p>package com.linmx.parsexml.OrgJsonJson;</p>
<p>import org.json.JSONObject;<br>import org.json.XML;</p>
<p>import java.io.*;</p>
<p>/**</p>
<ul>
<li>@Description TODO</li>
<li>@Author linmingxing</li>
<li><p>@Date 2019/5/10 下午3:46<br>**/<br>public class XmlService {</p>
<p> //path为xml文件的路径<br> public JSONObject parseXml(String path){</p>
<pre><code>try {
    Reader reader = new FileReader(path);
    JSONObject jsonObject = XML.toJSONObject(reader);
    return jsonObject;
} catch (FileNotFoundException e) {
    e.printStackTrace();
}
return null;
</code></pre><p> }<br>}</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line">	解析出来的jsonObject使用.toString方法即可获取json字符串。</span><br><span class="line">	上面的例子解析出的结果如下：</span><br><span class="line">	&#123;&quot;studentList&quot;:</span><br><span class="line">		&#123;</span><br><span class="line">			&quot;student&quot;:[</span><br><span class="line">				&#123;</span><br><span class="line">					&quot;score&quot;:&#123;</span><br><span class="line">						&quot;subject&quot;:[</span><br><span class="line">							&#123;&quot;name&quot;:&quot;Advanced Mathematics&quot;,&quot;content&quot;:90&#125;,</span><br><span class="line">							&#123;&quot;name&quot;:&quot;College English&quot;,&quot;content&quot;:85&#125;,</span><br><span class="line">							&#123;&quot;name&quot;:&quot;C++Programming&quot;,&quot;content&quot;:88&#125;</span><br><span class="line">						]</span><br><span class="line">					&#125;,</span><br><span class="line">					&quot;gender&quot;:&quot;man&quot;,</span><br><span class="line">					&quot;name&quot;:&quot;小明&quot;,</span><br><span class="line">					&quot;id&quot;:&quot;A01&quot;,</span><br><span class="line">					&quot;class&quot;:&quot;A&quot;,</span><br><span class="line">					&quot;age&quot;:19</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					&quot;score&quot;:&#123;</span><br><span class="line">						&quot;subject&quot;:[</span><br><span class="line">							&#123;&quot;name&quot;:&quot;Data Structure&quot;,&quot;content&quot;:80&#125;,</span><br><span class="line">							&#123;&quot;name&quot;:&quot;JavaProgramming&quot;,&quot;content&quot;:90&#125;</span><br><span class="line">						]</span><br><span class="line">					&#125;,</span><br><span class="line">					&quot;gender&quot;:&quot;woman&quot;,</span><br><span class="line">					&quot;name&quot;:&quot;小红&quot;,</span><br><span class="line">					&quot;id&quot;:&quot;A02&quot;,</span><br><span class="line">					&quot;class&quot;:&quot;B&quot;,</span><br><span class="line">					&quot;age&quot;:20</span><br><span class="line">				&#125;</span><br><span class="line">		],</span><br><span class="line">		&quot;student1&quot;:</span><br><span class="line">			&#123;</span><br><span class="line">				&quot;score&quot;:&#123;</span><br><span class="line">					&quot;subject&quot;:[</span><br><span class="line">						&#123;&quot;name&quot;:&quot;Data Structure&quot;,&quot;content&quot;:80&#125;,</span><br><span class="line">						&#123;&quot;name&quot;:&quot;JavaProgramming&quot;,&quot;content&quot;:90&#125;</span><br><span class="line">				 	]</span><br><span class="line">			 	&#125;,</span><br><span class="line">				&quot;gender&quot;:&quot;woman&quot;,</span><br><span class="line">				&quot;name&quot;:&quot;小红&quot;,</span><br><span class="line">				&quot;id&quot;:&quot;A02&quot;,</span><br><span class="line">				&quot;class&quot;:&quot;B&quot;,</span><br><span class="line">				&quot;age&quot;:20</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"># 2、解析xml的四种经典方式</span><br><span class="line">	xml文件如下：</span><br></pre></td></tr></table></figure>
<p>&lt;?xml version=”1.0” encoding=”UTF-8”?&gt;</p>
<p><bookstore><br>    <book id="1"><br>        <name>冰与火之歌</name><br>        <author>乔治马丁</author><br>        <year>2014</year><br>        <price>89</price><br>    </book><br>    <book id="2"><br>        <name>安徒生童话</name><br>        <year>2004</year><br>        <price>77</price><br>        <language>English</language><br>    </book><br></bookstore><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 1.1、DOM解析</span><br><span class="line"></span><br><span class="line">	　　DOM的全称是Document Object Model，也即文档对象模型。在应用程序中，基于DOM的XML分析器将一个XML文档转换成一个对象模型的集合（通常称DOM树），应用程序正是通过对这个对象模型的操作，来实现对XML文档数据的操作。通过DOM接口，应用程序可以在任何时候访问XML文档中的任何一部分数据，因此，这种利用DOM接口的机制也被称作随机访问机制。</span><br><span class="line">	</span><br><span class="line">	　　DOM接口提供了一种通过分层对象模型来访问XML文档信息的方式，这些分层对象模型依据XML的文档结构形成了一棵节点树。无论XML文档中所描述的是什么类型的信息，即便是制表数据、项目列表或一个文档，利用DOM所生成的模型都是节点树的形式。也就是说，DOM强制使用树模型来访问XML文档中的信息。由于XML本质上就是一种分层结构，所以这种描述方法是相当有效的。</span><br><span class="line">	</span><br><span class="line">	　　DOM树所提供的随机访问方式给应用程序的开发带来了很大的灵活性，它可以任意地控制整个XML文档中的内容。然而，由于DOM分析器把整个XML文档转化成DOM树放在了内存中，因此，当文档比较大或者结构比较复杂时，对内存的需求就比较高。而且，对于结构复杂的树的遍历也是一项耗时的操作。所以，DOM分析器对机器性能的要求比较高，实现效率不十分理想。不过，由于DOM分析器所采用的树结构的思想与XML文档的结构相吻合，同时鉴于随机访问所带来的方便，因此，DOM分析器还是有很广泛的使用价值的。</span><br><span class="line">	</span><br><span class="line">	　　　　优点：</span><br><span class="line">	</span><br><span class="line">	　　　　　　1、形成了树结构，有助于更好的理解、掌握，且代码容易编写。</span><br><span class="line">	</span><br><span class="line">	　　　　　　2、解析过程中，树结构保存在内存中，方便修改。</span><br><span class="line">	</span><br><span class="line">	　　　　缺点：</span><br><span class="line">	</span><br><span class="line">	　　　　　　1、由于文件是一次性读取，所以对内存的耗费比较大。</span><br><span class="line">	</span><br><span class="line">	　　　　　　2、如果XML文件比较大，容易影响解析性能且可能会造成内存溢出。</span><br><span class="line">	</span><br><span class="line">	　　以下是解析代码：</span><br></pre></td></tr></table></figure></p>
<p>public class DOMTest {<br>    public static void main(String[] args) {<br>        //创建一个DocumentBuilderFactory的对象<br>        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();<br>        //创建一个DocumentBuilder的对象<br>        try {<br>            //创建DocumentBuilder对象<br>            DocumentBuilder db = dbf.newDocumentBuilder();<br>            //通过DocumentBuilder对象的parser方法加载books.xml文件到当前项目下<br>            Document document = db.parse(“books.xml”);<br>            //获取所有book节点的集合<br>            NodeList bookList = document.getElementsByTagName(“book”);<br>            //通过nodelist的getLength()方法可以获取bookList的长度<br>            System.out.println(“一共有” + bookList.getLength() + “本书”);<br>            //遍历每一个book节点<br>            for (int i = 0; i &lt; bookList.getLength(); i++) {<br>                System.out.println(“=================下面开始遍历第” + (i + 1) + “本书的内容=================”);<br>                //通过 item(i)方法 获取一个book节点，nodelist的索引值从0开始<br>                Node book = bookList.item(i);<br>                //获取book节点的所有属性集合<br>                NamedNodeMap attrs = book.getAttributes();<br>                System.out.println(“第 “ + (i + 1) + “本书共有” + attrs.getLength() + “个属性”);<br>                //遍历book的属性<br>                for (int j = 0; j &lt; attrs.getLength(); j++) {<br>                    //通过item(index)方法获取book节点的某一个属性<br>                    Node attr = attrs.item(j);<br>                    //获取属性名<br>                    System.out.print(“属性名：” + attr.getNodeName());<br>                    //获取属性值<br>                    System.out.println(“–属性值” + attr.getNodeValue());<br>                }<br>                //解析book节点的子节点<br>                NodeList childNodes = book.getChildNodes();<br>                //遍历childNodes获取每个节点的节点名和节点值<br>                System.out.println(“第” + (i+1) + “本书共有” +<br>                childNodes.getLength() + “个子节点”);<br>                for (int k = 0; k &lt; childNodes.getLength(); k++) {<br>                    //区分出text类型的node以及element类型的node<br>                    if (childNodes.item(k).getNodeType() == Node.ELEMENT_NODE) {<br>                        //获取了element类型节点的节点名<br>                        System.out.print(“第” + (k + 1) + “个节点的节点名：” </p>
<pre><code>                    + childNodes.item(k).getNodeName());
                    //获取了element类型节点的节点值
                    System.out.println(&quot;--节点值是：&quot; + childNodes.item(k).getFirstChild().getNodeValue());
                    //System.out.println(&quot;--节点值是：&quot; + childNodes.item(k).getTextContent());
                }
            }
            System.out.println(&quot;======================结束遍历第&quot; + (i + 1) + &quot;本书的内容=================&quot;);
        }
    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    } catch (SAXException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }        
}
</code></pre><p>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##1.2 SAX解析</span><br><span class="line"></span><br><span class="line">	　　SAX的全称是Simple APIs for XML，也即XML简单应用程序接口。与DOM不同，SAX提供的访问模式是一种顺序模式，这是一种快速读写XML数据的方式。当使用SAX分析器对XML文档进行分析时，会触发一系列事件，并激活相应的事件处理函数，应用程序通过这些事件处理函数实现对XML文档的访问，因而SAX接口也被称作事件驱动接口。</span><br><span class="line">	</span><br><span class="line">	　　　　优点：</span><br><span class="line">	</span><br><span class="line">	　　　　　　1、采用事件驱动模式，对内存耗费比较小。</span><br><span class="line">	</span><br><span class="line">	　　　　　　2、适用于只处理XML文件中的数据时。</span><br><span class="line">	</span><br><span class="line">	　　　　缺点：</span><br><span class="line">	</span><br><span class="line">	　　　　　　1、编码比较麻烦。</span><br><span class="line">	</span><br><span class="line">	　　　　　　2、很难同时访问XML文件中的多处不同数据。</span><br><span class="line">	</span><br><span class="line">	　　以下是解析代码：</span><br></pre></td></tr></table></figure></p>
<p>public class SAXTest {<br>    /**</p>
<pre><code> * @param args
 */
public static void main(String[] args) {
    //锟斤拷取一锟斤拷SAXParserFactory锟斤拷实锟斤拷
    SAXParserFactory factory = SAXParserFactory.newInstance();
    //通锟斤拷factory锟斤拷取SAXParser实锟斤拷
    try {
        SAXParser parser = factory.newSAXParser();
        //锟斤拷锟斤拷SAXParserHandler锟斤拷锟斤拷
        SAXParserHandler handler = new SAXParserHandler();
        parser.parse(&quot;books.xml&quot;, handler);
        System.out.println(&quot;~！~！~！共有&quot; + handler.getBookList().size()
                + &quot;本书&quot;);
        for (Book book : handler.getBookList()) {
            System.out.println(book.getId());
            System.out.println(book.getName());
            System.out.println(book.getAuthor());
            System.out.println(book.getYear());
            System.out.println(book.getPrice());
            System.out.println(book.getLanguage());
            System.out.println(&quot;----finish----&quot;);
        }
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
</code></pre><p>}</p>
<p>public class SAXParserHandler extends DefaultHandler {<br>    String value = null;<br>    Book book = null;<br>    private ArrayList<book> bookList = new ArrayList<book>();<br>    public ArrayList<book> getBookList() {<br>        return bookList;<br>    }</book></book></book></p>
<pre><code>int bookIndex = 0;
/**
 * 用来标识解析开始
 */
@Override
public void startDocument() throws SAXException {
    // TODO Auto-generated method stub
    super.startDocument();
    System.out.println(&quot;SAX解析开始&quot;);
}

/**
 * 用来标识解析结束
 */
@Override
public void endDocument() throws SAXException {
    // TODO Auto-generated method stub
    super.endDocument();
    System.out.println(&quot;SAX解析结束&quot;);
}

/**
 * 解析xml元素
 */
@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    //调用DefaultHandler类的startElement方法
    super.startElement(uri, localName, qName, attributes);
    if (qName.equals(&quot;book&quot;)) {
        bookIndex++;
        //创建一个book对象
        book = new Book();
        //开始解析book元素的属性
        System.out.println(&quot;======================开始遍历某一本书的内容=================&quot;);
        //不知道book元素下属性的名称以及个数，如何获取属性名以及属性值
        int num = attributes.getLength();
        for(int i = 0; i &lt; num; i++){
            System.out.print(&quot;book元素的第&quot; + (i + 1) +  &quot;个属性名是：&quot;
                    + attributes.getQName(i));
            System.out.println(&quot;---属性值是：&quot; + attributes.getValue(i));
            if (attributes.getQName(i).equals(&quot;id&quot;)) {
                book.setId(attributes.getValue(i));
            }
        }
    }
    else if (!qName.equals(&quot;name&quot;) &amp;&amp; !qName.equals(&quot;bookstore&quot;)) {
        System.out.print(&quot;节点名是：&quot; + qName + &quot;---&quot;);
    }
}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    //调用DefaultHandler类的endElement方法
    super.endElement(uri, localName, qName);
    //判断是否针对一本书已经遍历结束
    if (qName.equals(&quot;book&quot;)) {
        bookList.add(book);
        book = null;
        System.out.println(&quot;======================结束遍历某一本书的内容=================&quot;);
    }
    else if (qName.equals(&quot;name&quot;)) {
        book.setName(value);
    }
    else if (qName.equals(&quot;author&quot;)) {
        book.setAuthor(value);
    }
    else if (qName.equals(&quot;year&quot;)) {
        book.setYear(value);
    }
    else if (qName.equals(&quot;price&quot;)) {
        book.setPrice(value);
    }
    else if (qName.equals(&quot;language&quot;)) {
        book.setLanguage(value);
    }
}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    // TODO Auto-generated method stub
    super.characters(ch, start, length);
    value = new String(ch, start, length);
    if (!value.trim().equals(&quot;&quot;)) {
        System.out.println(&quot;节点值是：&quot; + value);
    }
}
</code></pre><p>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 1.3 JDOM解析</span><br><span class="line"></span><br><span class="line">	特征：</span><br><span class="line">	　　1、仅使用具体类，而不使用接口。</span><br><span class="line">	　　2、API大量使用了Collections类。</span><br><span class="line">	　　以下是解析代码：</span><br></pre></td></tr></table></figure></p>
<p>public class JDOMTest {<br>    private static ArrayList<book> booksList = new ArrayList<book>();<br>    /**</book></book></p>
<pre><code> * @param args
 */
public static void main(String[] args) {
    // 进行对books.xml文件的JDOM解析
    // 准备工作
    // 1.创建一个SAXBuilder的对象
    SAXBuilder saxBuilder = new SAXBuilder();
    InputStream in;
    try {
        // 2.创建一个输入流，将xml文件加载到输入流中
        in = new FileInputStream(&quot;src/res/books.xml&quot;);
        InputStreamReader isr = new InputStreamReader(in, &quot;UTF-8&quot;);
        // 3.通过saxBuilder的build方法，将输入流加载到saxBuilder中
        Document document = saxBuilder.build(isr);
        // 4.通过document对象获取xml文件的根节点
        Element rootElement = document.getRootElement();
        // 5.获取根节点下的子节点的List集合
        List&lt;Element&gt; bookList = rootElement.getChildren();
        // 继续进行解析
        for (Element book : bookList) {
            Book bookEntity = new Book();
            System.out.println(&quot;======开始解析第&quot; + (bookList.indexOf(book) + 1)
                    + &quot;书======&quot;);
            // 解析book的属性集合
            List&lt;Attribute&gt; attrList = book.getAttributes();
            // //知道节点下属性名称时，获取节点值
            // book.getAttributeValue(&quot;id&quot;);
            // 遍历attrList(针对不清楚book节点下属性的名字及数量)
            for (Attribute attr : attrList) {
                // 获取属性名
                String attrName = attr.getName();
                // 获取属性值
                String attrValue = attr.getValue();
                System.out.println(&quot;属性名：&quot; + attrName + &quot;----属性值：&quot;
                        + attrValue);
                if (attrName.equals(&quot;id&quot;)) {
                    bookEntity.setId(attrValue);
                }
            }
            // 对book节点的子节点的节点名以及节点值的遍历
            List&lt;Element&gt; bookChilds = book.getChildren();
            for (Element child : bookChilds) {
                System.out.println(&quot;节点名：&quot; + child.getName() + &quot;----节点值：&quot;
                        + child.getValue());
                if (child.getName().equals(&quot;name&quot;)) {
                    bookEntity.setName(child.getValue());
                }
                else if (child.getName().equals(&quot;author&quot;)) {
                    bookEntity.setAuthor(child.getValue());
                }
                else if (child.getName().equals(&quot;year&quot;)) {
                    bookEntity.setYear(child.getValue());
                }
                else if (child.getName().equals(&quot;price&quot;)) {
                    bookEntity.setPrice(child.getValue());
                }
                else if (child.getName().equals(&quot;language&quot;)) {
                    bookEntity.setLanguage(child.getValue());
                }
            }
            System.out.println(&quot;======结束解析第&quot; + (bookList.indexOf(book) + 1)
                    + &quot;书======&quot;);
            booksList.add(bookEntity);
            bookEntity = null;
            System.out.println(booksList.size());
            System.out.println(booksList.get(0).getId());
            System.out.println(booksList.get(0).getName());

        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (JDOMException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}
</code></pre><p>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 1.4、DOM4J解析</span><br><span class="line"></span><br><span class="line">	特征：</span><br><span class="line">	1、JDOM的一种智能分支，它合并了许多超出基本XML文档表示的功能。</span><br><span class="line">	2、它使用接口和抽象基本类方法。</span><br><span class="line">	3、具有性能优异、灵活性好、功能强大和极端易用的特点。</span><br><span class="line">	4、是一个开放源码的文件</span><br><span class="line">	以下是解析代码：</span><br></pre></td></tr></table></figure></p>
<p>public class DOM4JTest {<br>    private static ArrayList<book> bookList = new ArrayList<book>();<br>    /**</book></book></p>
<pre><code> * @param args
 */
public static void main(String[] args) {
    // 解析books.xml文件
    // 创建SAXReader的对象reader
    SAXReader reader = new SAXReader();
    try {
        // 通过reader对象的read方法加载books.xml文件,获取docuemnt对象。
        Document document = reader.read(new File(&quot;src/res/books.xml&quot;));
        // 通过document对象获取根节点bookstore
        Element bookStore = document.getRootElement();
        // 通过element对象的elementIterator方法获取迭代器
        Iterator it = bookStore.elementIterator();
        // 遍历迭代器，获取根节点中的信息（书籍）
        while (it.hasNext()) {
            System.out.println(&quot;=====开始遍历某一本书=====&quot;);
            Element book = (Element) it.next();
            // 获取book的属性名以及 属性值
            List&lt;Attribute&gt; bookAttrs = book.attributes();
            for (Attribute attr : bookAttrs) {
                System.out.println(&quot;属性名：&quot; + attr.getName() + &quot;--属性值：&quot;
                        + attr.getValue());
            }
            Iterator itt = book.elementIterator();
            while (itt.hasNext()) {
                Element bookChild = (Element) itt.next();
                System.out.println(&quot;节点名：&quot; + bookChild.getName() + &quot;--节点值：&quot; + bookChild.getStringValue());
            }
            System.out.println(&quot;=====结束遍历某一本书=====&quot;);
        }
    } catch (DocumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
</code></pre><p>}<br><code>`</code></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">林明星</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">林明星</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>



  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
